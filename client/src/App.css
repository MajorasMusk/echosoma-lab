import { useState, useEffect } from "react";
import { runSigil, getArchive } from "./api";

export default function App() {
  const [sigil, setSigil] = useState(null);
  const [archive, setArchive] = useState([]);

  useEffect(() => {
    getArchive().then(setArchive);
  }, []);

  const handleSigil = async () => {
    const result = await runSigil("Action Scar");
    setSigil(result);
  };

  return (
    <div className="p-6 bg-black text-white min-h-screen">
      <h1 className="text-3xl font-bold mb-6">ECHOSOMA Action Lab</h1>
      <button
        onClick={handleSigil}
        className="bg-indigo-600 px-4 py-2 rounded-lg shadow-md"
      >
        Generate Sigil
      </button>
      {sigil && (
        <div className="mt-4">
          <p>Scar Value: {sigil.scar_val.toFixed(3)}</p>
        </div>
      )}
      <h2 className="text-xl mt-6">Scar Archive</h2>
      <ul>
        {archive.map((a, i) => (
          <li key={i}>{a.glyph} â€” {a.reflection}</li>
        ))}
      </ul>
    </div>
  );
}
